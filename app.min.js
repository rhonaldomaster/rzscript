// ==UserScript==
// @name           rzscript
// @namespace      rzscript
// @description    Updated version of original MZScript
// @homepage       https://github.com/rhonaldomaster/rzscript
// @include        http*://*managerzone.*
// @grant          none
// @version        0.1
// @copyright      GNU/GPL v3
// @author         rhonaldomaster | https://github.com/rhonaldomaster
// @credits        c_c, serbocapo
// ==/UserScript==
const rzscript=(()=>{const a=['','soccer','hockey'],c=()=>{const _='#pt-wrapper{bottom:52px;filter:alpha(opacity=50);opacity:0.5;}#notifications-wrapper{bottom:-2px;}.quicklink{background-color:#4A4A4A;border:0;border-radius:4px;box-shadow:0 0 1px 0 #000;color:#FFF;cursor:pointer;display:inline-block;margin-left:4px;padding:2px 4px;text-decoration:none;}.quicklink:hover{background-color:#000000;box-shadow:0 0 2px 0 #000000;color:#FFFFFF;text-decoration:none;}.pagelinks{padding:0 4px 8px;}.quicklinks{text-align:center;}#fluid-menu-opener > div.sport-line,#top-wrapper-sport-line{background:#5d5b5f none repeat scroll 0 0;}.preview-results{border:2px solid #2A4CB0;cursor:pointer;float:right;height:20px;padding:4px 0 0 4px;width:20px;}.bbcode{margin:auto;max-width:640px;}';if('undefined'!=typeof GM_addStyle)return void GM_addStyle(_);if('undefined'!=typeof PRO_addStyle)return void PRO_addStyle(_);if('undefined'!=typeof addStyle)return void addStyle(_);let aa=document.querySelectorAll('head');if(!(1>aa.length)){let ba=document.createElement('style');ba.appendChild(document.createTextNode(_)),aa[0].appendChild(ba)}},d=_=>{const aa=document.querySelector(_.selector);if(!aa){let ba='<div '+('.'==_.selector.charAt(0)?'class':'id')+'="'+_.selector.replace(/\./g,'')+'">';ba+=_.links.reduce((ca,da)=>{return ca+'<a class="quicklink" href="'+da.url+'"'+(0>da.url.indexOf('?p=')?' target="_blank"':'')+' title="'+da.title+'">'+da.text+'</a>'},''),ba+='</div>',_.wrapper.insertAdjacentHTML(_.prepend?'afterbegin':'beforeend',ba)}},f=()=>{const _={selector:'.js-forum-buttons',wrapper:document.querySelector('#notifications-wrapper'),links:[{text:'MER',title:'Mercado(Transfers)',url:'?p=forum&sub=topics&forum_id=254&sport=soccer'},{text:'AMI',title:'Amistosos',url:'?p=forum&sub=topics&forum_id=249&sport=soccer'},{text:'MZH',title:'MZ Habla',url:'?p=forum&sub=topics&forum_id=253&sport=soccer'},{text:'PYR',title:'Preguntas y Respuestas',url:'?p=forum&sub=topics&forum_id=255&sport=soccer'},{text:'DA',title:'Discusi&oacute;n Abierta',url:'?p=forum&sub=topics&forum_id=250&sport=soccer'},{text:'FED',title:'Federaciones',url:'?p=forum&sub=topics&forum_id=251&sport=soccer'},{text:'HDC',title:'Hablemos de copas',url:'?p=forum&sub=topics&forum_id=252&sport=soccer'}],prepend:!1};d(_)},g=()=>{const _={selector:'.pagelinks .quicklinks',wrapper:document.querySelector('#contentDiv'),links:[{text:'Monitoreo',title:'Monitoreo',url:'?p=transfer&sub=yourplayers'},{text:'Vista Alternativa',title:'Ver Vista Alternativa',url:'?p=players&sub=alt'},{text:'Seguimiento',title:'Ir a Seguimiento',url:'?p=shortlist'},{text:'Finanzas',title:'Ver Finanzas',url:'?p=economy'},{text:'Mercado',title:'Ver Mercado',url:'?p=transfer'},{text:'Jugados',title:'Ver los Partidos Jugados',url:'?p=match&sub=played'},{text:'Pr&oacute;ximos',title:'Ver los Pr&oacute;ximos Partidos',url:'?p=match&sub=scheduled'},{text:'T&aacute;cticas',title:'Ir a T&aacute;cticas',url:'?p=tactics'},{text:'Lesiones/Sanciones',title:'Ver Lesionados/Sancionados',url:'?p=players&sub=unavailable'},{text:'Reporte entr.',title:'Ver el Reporte de Entrenamiento',url:'?p=training_report'},{text:'Entrenamiento',title:'Ir al Entrenamiento General',url:'?p=training'},{text:'Skiller',title:'Skiller MZ Player',url:'http://mzplayer.se'},{text:'Imgur',title:'Ir a Imgur',url:'https://imgur.com/'}],prepend:!0};d(_)},h=()=>{const _=q();_&&localStorage.getItem('showAlwaysUserSignature')&&k(_,!1);let aa=document.querySelector('.bbcode');const ba='<form class="js-signature-form"><table style="width:100%;"><tr><td><span>Texto</span> <small>(Usa bbcode)</small></td></tr><tr><td><textarea name="signature" cols="84" rows="5" style="padding:5px;">'+(_?_:'')+'</textarea></td></tr><tr><td><button type="button" class="quicklink js-signature">Agregar firma</button><button type="button" class="quicklink js-save-signature">Guardar firma</button><button type="button" class="quicklink js-delete-signature">Borrar firma</button></td></tr></table></form>';aa.insertAdjacentHTML('beforeend',ba)},k=(_,aa)=>{let ba=document.querySelector('.markItUpEditor');const ca=aa||''===ba.value;if(ca){ba.value+='\r\n\r\n';for(let da=0;50>=da;da++)ba.value+='-';ba.value+='\r\n'+_,m(ba)}},l=()=>{let _=document.querySelector('.js-signature-form');_=JSON.parse(G(_));let aa=_.signature.replace(/^(\s|\&nbsp;)*|(\s|\&nbsp;)*$/g,'');''!==aa&&0<aa.length&&null!==aa&&n(aa);let ba=window.confirm('Mostrar siempre?');return ba?void localStorage.setItem('showAlwaysUserSignature',ba):void localStorage.removeItem('showAlwaysUserSignature')},m=_=>{if(_.setSelectionRange)_.focus().setSelectionRange(0,0);else if(_.createTextRange){let aa=_.createTextRange();aa.moveStart('character',0).select()}},n=_=>{const aa=localStorage.getItem('userSignature');aa!=_&&localStorage.setItem('userSignature',_)},o=()=>{localStorage.removeItem('userSignature'),localStorage.removeItem('showAlwaysUserSignature'),alert('La firma fue eliminada')},p=_=>{_.preventDefault();let aa=document.querySelector('.js-signature-form');aa=JSON.parse(G(aa));let ba=aa.signature.replace(/^(\s|\&nbsp;)*|(\s|\&nbsp;)*$/g,'');''!==ba&&0<ba.length&&null!==ba&&k(ba,!0)},q=()=>{let _='';return localStorage.getItem('userSignature')?_=localStorage.getItem('userSignature'):localStorage.getItem('firmaMZ')&&(_=localStorage.getItem('firmaMZ')),_},r=()=>{const _=document.querySelector('#match-info-wrapper');if(_){let aa=_.querySelector('h1');const ba=aa.innerHTML;-1<['Liga','League'].indexOf(ba)&&(aa.innerHTML='<a href="?p=league&type=senior">'+ba+'</a>')}},s=(_,aa)=>{let ba=null;const ca=_.getElementsByTagName('Player');for(let da=0;da<ca.length;da++)aa==ca[da].getAttribute('id')&&(ba=ca[da]);return ba},t=()=>{'soccer'==ajaxSport?u():'hockey'==ajaxSport&&w()},u=()=>{let _=document.querySelectorAll('.team-table');if(_)for(let ba,aa=0;aa<_.length;aa++)ba=_[aa].querySelectorAll('a'),v(ba[0].href.split('&')[1].split('=')[1],aa)},v=(_,aa)=>{let ba=document.querySelectorAll('#match-statistics .hitlist_wrapper_background table')[aa];if(ba){const ca=$.ajax({url:'/xml/team_playerlist.php',type:'GET',data:{sport_id:a.indexOf(ajaxSport),team_id:_}});ca.done(da=>{const ea=da.getElementsByTagName('TeamPlayers')[0].getAttribute('teamCurrency');let fa=0,ga=0,ha=ba.rows[0],ia=ba.querySelector('tbody'),ja=ba.querySelector('tfoot'),ka=ja.rows[1];ha.innerHTML='<td>Valor</td>'+ha.innerHTML;for(let la=0;la<ia.rows.length;la++)if(ia.rows[la].querySelector('img'))ia.rows[la].cells[0].colSpan='13';else{let ma=ia.rows[la].querySelector('a'),na=s(da,ma.href.split('&')[1].split('=')[1]);if(na){let oa=K(na.getAttribute('value'),ea);ga+=1,ia.rows[la].innerHTML='<td style="width:62px;text-align:right;padding-right:15px">'+L(oa)+'</td>'+ia.rows[la].innerHTML,12>ga&&(fa+=oa)}}ka.innerHTML='<td style="width:62px;text-align:right;padding-right:15px">'+L(fa)+'</td>'+ka.innerHTML,ja.rows[3].cells[0].colSpan='13'})}},w=()=>{let _=document.querySelectorAll('.team-table');if(_)for(let ba,aa=0;aa<_.length;aa++)ba=_[aa].querySelectorAll('a'),x(ba[0].href.split('&')[1].split('=')[1],aa)},x=(_,aa)=>{var ba=0===aa?0:2;let ca=document.querySelectorAll('#match-statistics .hitlist_wrapper_background table')[ba];if(ca){const da=$.ajax({url:'/xml/team_playerlist.php',type:'GET',data:{sport_id:a.indexOf(ajaxSport),team_id:_}});da.done(ea=>{const fa=ea.getElementsByTagName('TeamPlayers')[0].getAttribute('teamCurrency');let ga=0,ha=0,ia=ca.rows[0],ja=ca.rows[1],ka=ca.querySelector('tbody'),la=ca.querySelector('tfoot'),ma=la.rows[1];ia.cells[0].colSpan=10,ca.rows[2].cells[0].colSpan=19,ja.innerHTML='<td>Valor</td>'+ja.innerHTML;let na=document.querySelectorAll('#match-statistics .hitlist_wrapper_background table')[ba+1],oa=na.querySelector('a'),pa=s(ea,oa.href.split('&')[1].split('=')[1]),qa=0;pa&&(qa=K(pa.getAttribute('value'),fa));for(let ta=0;ta<ka.rows.length;ta++)if(ka.rows[ta].querySelector('img'))ka.rows[ta].cells[0].colSpan='19';else if(''!==ka.rows[ta].cells[0]){let ua=ka.rows[ta].querySelector('a');if(ua){let va=s(ea,ua.href.split('&')[1].split('=')[1]);if(va){let wa=K(va.getAttribute('value'),fa);ha+=1,ka.rows[ta].innerHTML='<td style="width:62px;text-align:right;padding-right:15px">'+L(wa)+'</td>'+ka.rows[ta].innerHTML,21>ha&&(ga+=wa)}}else ka.rows[ta].innerHTML='<td style="width:62px;text-align:right;padding-right:15px"></td>'+ka.rows[ta].innerHTML}else 2>ka.rows[ta].cells&&(ka.rows[ta].innerHTML='<td style="width:62px;text-align:right;padding-right:15px"></td>'+ka.rows[ta].innerHTML);ma.innerHTML='<td style="width:62px;text-align:right;padding-right:15px">'+(L(ga+qa)+'<br><small>Incluye valor de portero</small></td>')+ma.innerHTML,la.rows[3].cells[0].colSpan='19';let ra=na.querySelector('thead');ra.rows[0].innerHTML='<td>Valor</td>'+ra.rows[0].innerHTML;let sa=na.querySelector('tbody');sa.rows[0].innerHTML='<td style="width:62px;text-align:right;padding-right:15px">'+L(qa)+'</td>'+sa.rows[0].innerHTML,na.querySelector('tfoot').rows[0].cells[0].colSpan='19'})}},y=()=>{let _=document.querySelector('#results-fixtures-header');_.insertAdjacentHTML('afterbegin','<div class="preview-results js-preview-results"><img src="https://i.imgur.com/WL38HPq.png" title="Ver resultados" alt="Ver resultados"/></div>')},z=()=>{let _=document.querySelectorAll('#fixtures-results-list > .odd');for(let aa=0;aa<_.length;aa++){let ba=_[aa].querySelector('.score-cell-wrapper > a'),ca=$.trim(_[aa].querySelector('.set-default-wrapper').innerHTML);if(''===ca){let da=ba.href.split('&')[2].split('=')[1];A(da,ba)}}},A=(_,aa)=>{const ba=$.ajax({url:'/xml/match_info.php',type:'GET',data:{sport_id:a.indexOf(ajaxSport),match_id:_}});ba.done(ca=>{if(!ca.getElementsByTagName('ManagerZone_Error')[0]){let da=aa.href.split('&')[3].split('=')[1],ea={local:1*ca.getElementsByTagName('Team')[0].getAttribute('goals'),visitor:1*ca.getElementsByTagName('Team')[1].getAttribute('goals')};aa.innerHTML=ea.local+' - '+ea.visitor,ea.local==ea.visitor?aa.className='yellow':da==ca.getElementsByTagName('Team')[0].getAttribute('id')?aa.className=ea.local>ea.visitor?'green':'red':da==ca.getElementsByTagName('Team')[1].getAttribute('id')&&(aa.className=ea.local>ea.visitor?'red':'green')}})},B=()=>{const aa=window.location.href;let ba=['private_cup&sub','cup&sub','u18','u21','u23','world','u18_world','friendlyseries&sub'].filter(fa=>{return-1<aa.indexOf(fa)});if(!(1>ba.length)){let ca,da,ea;-1<aa.indexOf('cup&sub')?(ca='#cup-div',da='#ui-id-4',ea='#group-stages'):-1<aa.indexOf('friendlyseries&sub')&&(ca='#friendly-series-div',da='#ui-id-2',ea='#ui-tabs-2'),void 0===typeof ca||($(document).on('click','.js-view-div-country',()=>{D(ea)}),void 0!==typeof da&&$(ca).on('click',da,()=>{setTimeout(()=>{C()},1500)}))}},C=()=>{let _=document.querySelectorAll('.nice_table thead tr.seriesHeader')[0],aa=_.cells[0];aa.innerHTML='<img class="js-view-div-country" src="https://i.imgur.com/IwaQRmF.png" title="Ver divisi&oacute;n y pa&iacute;s" style="cursor:pointer;">'},D=_=>{if(''!==_&&_){let aa=document.querySelector(_);if(aa){let ba=aa.querySelectorAll('.nice_table tbody > tr');for(let ca=0;ca<ba.length;ca++){let da=ba[ca],ea=da.querySelectorAll('a')[0],fa=ea.href.split('&')[1].replace('tid=','');const ga=$.ajax({url:'/xml/manager_data.php',type:'GET',data:{sport_id:a.indexOf(ajaxSport),team_id:fa}});(function(ha){ga.done(ia=>{let ja=a.indexOf(ajaxSport)-1,ka=ia.getElementsByTagName('Team')[ja].getAttribute('seriesName'),la=ia.getElementsByTagName('UserData')[0].getAttribute('countryShortname'),ma=ia.getElementsByTagName('Team')[ja].getAttribute('seriesId'),na=ia.getElementsByTagName('Team')[ja].getAttribute('teamId'),oa='<img src="http://static.managerzone.com/nocache-581/img/flags/12/'+la.toLowerCase()+'.png">&nbsp;';ha.insertAdjacentHTML('beforeend','&nbsp;- &gt; <a href="?p=league&type=senior&sid='+ma+'&tid='+na+'">'+ka+'</a>'),ha.insertAdjacentHTML('afterbegin',oa)})})(ea.parentNode)}}}},E=()=>{setTimeout(()=>{const _=document.querySelector('#training_report');if(_){const aa=_.childNodes[2],ba=aa.querySelector('tbody');for(let ca=0;ca<ba.rows.length;ca++){let da=ba.rows[ca].cells[4],ea=da.querySelectorAll('img').length;da.querySelector('div').innerHTML+='<b>('+ea+')</b>'}}},2500)},F=_=>{-1!==$.inArray(_.keyCode,[46,8,9,27,13])||65==_.keyCode&&!0===_.ctrlKey||67==_.keyCode&&!0===_.ctrlKey||88==_.keyCode&&!0===_.ctrlKey||35<=_.keyCode&&39>=_.keyCode||(_.shiftKey||48>_.keyCode||57<_.keyCode)&&(96>_.keyCode||105<_.keyCode)&&_.preventDefault()},G=_=>{let aa={},ba=_.querySelectorAll('input, select, textarea');for(let ca=0;ca<ba.length;++ca)ba[ca].name&&(aa[ba[ca].name]=ba[ca].value.trim());return JSON.stringify(aa)},H=_=>{let aa=new Date(_);return aa.setMinutes(aa.getMinutes()-aa.getTimezoneOffset())},I=_=>{let aa=_.split('-');return aa[2]+'-'+aa[1]+'-'+aa[0]},J=(_,aa)=>{return(H(aa)-H(_))/86400000},K=(_,aa)=>{const ba={USD:7.4234,EUR:9.1775,SEK:1,MM:1,UYU:0.256963,R$:2.62589,GBP:13.35247,DKK:1.23522,NOK:1.07245,CHF:5.86737,CAD:5.70899,AUD:5.66999,ILS:1.6953,MXN:0.68576,ARS:2.64445,BOB:0.939,PYG:0.001309,RUB:0.26313,PLN:1.95278,ISK:0.10433,BGL:4.70738,BGN:4.70738,ZAR:1.23733,US$:7.4234,THB:0.17079,SIT:0.03896,SKK:0.24946,JPY:0.06,INR:0.17,MZ:1},ca=1/ba[aa],da=localStorage.getItem('moneda');return da?Math.round(1/ba[cMoneda]*(_/ca)):Math.round(1/ba.USD*(_/ca))},L=_=>{let aa='',ba=_.toString();for(;3<ba.length;)aa='.'+ba.substr(ba.length-3)+aa,ba=ba.substring(0,ba.length-3);return ba+aa},M=_=>{const aa=J(I(_.boughtDate),I(_.soldDate));if(0>aa)return void alert('Por favor revise las fechas ingresadas');let ba={value:0,percentage:0},ca=_.soldPrice-_.boughtPrice;return 0<ca&&(ba.percentage=69<aa?15:26<aa?50:95,_.originalPlayer?ba.percentage=15:_.exYouth&&(ba.percentage=20>_.playerAge?25:21>_.playerAge?20:15)),ba.value=Math.round(ca*(ba.percentage/100)),ba},N=_=>{_.preventDefault();let aa=_.target,ba=G(aa);ba=JSON.parse(ba);let ca={originalPlayer:2==1*ba.origin,exYouth:1==1*ba.origin,playerAge:1*ba.playerAge,boughtDate:ba.boughtDate,soldDate:ba.soldDate,boughtPrice:0==1*ba.origin?1*ba.boughtValue:ba.playerValue,soldPrice:1*ba.soldValue},da=M(ca),ea='Se descuentan '+L(da.value)+' en impuestos ('+da.percentage+'%)<br>Recibes '+L(ca.soldPrice-da.value);document.querySelector('.js-tax-result').innerHTML=ea},O=()=>{return'<article style="padding-left:5px;"><h3>Calcular impuestos</h3><div><form class="js-calculate-tax"><table style="width:100%;"><tr><td><span>Origen jugador</span></td><td><select name="origin"><option value="0">Comprado</option><option value="1">Ex juvenil</option><option value="2">Original del club</option></select></td></tr><tr><td><span>Valor jugador</span> <span style="color:#A3A30D;">*</span></td><td><input type="text" name="playerValue" value="0" class="js-only-numbers"></td></tr><tr><td><span>Edad jugador</span> <span style="color:#A3A30D;">*</span></td><td><select name="playerAge"><option value="19">19</option><option value="20">20</option><option value="21">M&aacute;s de 20</option></select></td></tr><tr><td><span>Valor compra</span> <span style="color:#FF043D;">*</span></td><td><input type="text" name="boughtValue" class="js-only-numbers"></td></tr><tr><td><span>Valor venta</span></td><td><input type="text" name="soldValue" class="js-only-numbers"></td></tr><tr><td><span>Fecha compra</span> <span style="color:#FF043D;">*</span></td><td><input type="text" name="boughtDate" placeholder="dd-mm-aaaa"></td></tr><tr><td><span>Fecha venta</span></td><td><input type="text" name="soldDate" placeholder="dd-mm-aaaa"></td></tr></table><div><span style="color:#FF043D;">*</span> <span>Si el jugador fue comprado</span><br><span style="color:#A3A30D;">*</span> <span>Si el jugador es original del club o ex juvenil</span></div><div style="margin-top:4px;"><button type="submit" class="quicklink"><span class="buttonClassMiddle">Calcular</span></button></div><div><p class="js-tax-result"></p></div></form></div></article>'},P=_=>{_.preventDefault();let aa=O(),ba=document.querySelector('.dg_playerview_info');ba.insertAdjacentHTML('beforeend',aa)},Q=()=>{let _=document.querySelector('.dg_playerview_info'),aa=_.querySelector('p');aa.insertAdjacentHTML('beforeend','<a href="#" class="js-render-tax mzbtn buttondiv button_red"><span class="buttonClassMiddle" style="white-space:nowrap;">Impuestos</span><span class="buttonClassRight">&nbsp;</span></a>')},R=()=>{const _=document.querySelectorAll('#topics-list > dd');for(let aa=0;aa<_.length;aa++){let ba=_[aa].querySelector('.topics-col-title').querySelector('a').getAttribute('href'),ca=_[aa].querySelector('.topics-col-counter'),da=(ca.innerText||ca.textContent).split(' / '),ea=parseInt(da[1]),fa=Math.floor(parseInt(ea)/50);if(0<fa&&50<ea){let ha=5<fa?5:fa+1;for(let ia=2;ia<ha;ia++){}}}},S=()=>{return'<div><div class="mzbtn buttondiv button_account" title="Borrar texto del area de mensaje"><span class="buttonClassMiddle js-empty-post-textarea" style="white-space: nowrap">Vaciar</span><span class="buttonClassRight">&nbsp;</span></div><div class="js-icons-container"><img src="https://i.imgur.com/3YitWv3.gif" alt=">"/>&nbsp;<img src="https://i.imgur.com/Q3B4Dqz.gif" title="(y)" alt="(y)"/>&nbsp;<img src="https://i.imgur.com/vWFv3Gt.gif" title="(n)" alt="(n)"/>&nbsp;<img src="https://i.imgur.com/jaT1cb4.gif" height="20px" title="wtf" alt="wtf"/>&nbsp;<img src="https://i.imgur.com/VfbyDHO.gif" height="20px" title="fail" alt="fail"/>&nbsp;<img src="https://i.imgur.com/cheJFuk.gif" height="20px" title="repost" alt="repost"/>&nbsp;<img src="https://i.imgur.com/jDjyKTf.gif" title="cri" alt="cri"/>&nbsp;<img src="https://i.imgur.com/6PopX5q.gif" title="ha-ha" alt="ha-ha"/><img src="https://i.imgur.com/nRp5BpE.gif" title=":)" alt=":)"/>&nbsp;<img src="https://i.imgur.com/CcuKTNz.gif" title=":D" alt=":D"/>&nbsp;<img src="https://i.imgur.com/Dfl5ZGS.gif" title="D" alt="D"/>&nbsp;<img src="https://i.imgur.com/8t9ZJse.gif" title="xD" alt="xD"/>&nbsp;<img src="https://i.imgur.com/1kJhHCs.gif" title=":/" alt=":/"/>&nbsp;<img src="https://i.imgur.com/1ncAraF.gif" title=":(" alt=":("/>&nbsp;<img src="https://i.imgur.com/xp6xUJJ.gif" title=":*(" alt=":*("/>&nbsp;<img src="https://i.imgur.com/qOigaWi.png" title=":S" alt=":S"/>&nbsp;<img src="https://i.imgur.com/nITjZn5.gif" title="erm" alt="erm"/>&nbsp;<img src="https://i.imgur.com/rSqmTPO.gif" title="8-)" alt="8-)"/>&nbsp;<img src="https://i.imgur.com/qP1rAQ5.png" title="\xAC\xAC" alt="\xAC\xAC"/>&nbsp;<img src="https://i.imgur.com/HdNdWN0.png" title="porfi" alt="porfi"/>&nbsp;<img src="https://i.imgur.com/QuXS7fE.gif" title="O.O" alt="O.O"/>&nbsp;<img src="https://i.imgur.com/RUQN2Hy.gif" title="_hm" alt="_hm"/>&nbsp;<img src="https://i.imgur.com/QLCdFIE.gif" title=">:(" alt=">:("/>&nbsp;<img src="https://i.imgur.com/55sAO1r.gif" title=">:)" alt=">:)"/>&nbsp;<img src="https://i.imgur.com/KbQOSgw.gif" title="flirt" alt="flirt"/>&nbsp;<img src="https://i.imgur.com/t5dALqK.gif" title=":P" alt=":P"/>&nbsp;<img src="https://i.imgur.com/zpY2A6I.gif" title="|-(" alt="|-("/>&nbsp;<img src="https://i.imgur.com/yPtUjin.gif" title=";)" alt=";)"/>&nbsp;<img src="https://i.imgur.com/OOsLDaW.gif" title="(h)" alt="(h)"/>&nbsp;<img src="https://i.imgur.com/LdCQyai.png" title="u.u" alt="u.u"/>&nbsp;<img src="https://i.imgur.com/KnhAURP.gif" title="shh" alt="shh"/>&nbsp;<img src="https://i.imgur.com/BzPDfzF.gif" title="nana" alt="nana"/><img src="https://i.imgur.com/XEHiXuO.gif" height="23px" title="rock" alt="rock"/><img src="https://i.imgur.com/CsCrOnE.gif" title="grr" alt="grr"/>&nbsp;<img src="https://i.imgur.com/K2d1Mbv.gif" height="23px" title="jaja" alt="jaja"/><img src="https://i.imgur.com/SMcjsnf.gif" title="eah" alt="eah"/><img src="https://i.imgur.com/aaPvRo4.gif" title="clap" alt="clap"/><img src="https://i.imgur.com/av8bxvU.gif" title="bla" alt="bla"/><img src="https://i.imgur.com/oQYWBTO.gif" title="l" alt="l"/>&nbsp;<img src="https://i.imgur.com/z64hDgz.gif" title="grr" alt="grr"/>&nbsp;<img src="https://i.imgur.com/NA84WqF.gif" title="angel" alt="angel"/>&nbsp;<img src="https://i.imgur.com/N2cdFNy.gif" title="diablo" alt="diablo"/>&nbsp;<img src="https://i.imgur.com/YWe8hno.gif" title="baba" alt="baba"/><img src="https://i.imgur.com/1t7YpCo.gif" height="23px" title="x)" alt="x)"/>&nbsp;<img src="https://i.imgur.com/UR5t0o6.gif" title="plz" alt="plz"/>&nbsp;<img src="https://i.imgur.com/KKx3thu.gif" title="umm" alt="umm"/><img src="https://i.imgur.com/sC8Mgmi.gif" title="facepalm" alt="facepalm"/>&nbsp;<img src="https://i.imgur.com/gJw92DZ.gif title="zzz" alt="zzz"/><img src="https://i.imgur.com/RzjaSKr.gif" title="om" alt="om"/><img src="https://i.imgur.com/7iCxtYD.gif" title="uh" alt="uh"/></div></div>'},T=_=>{let aa=document.querySelector('.markItUpEditor'),ba=aa.scrollTop,ca=aa.selectionStart,da=aa.selectionEnd;aa.value=aa.value.substr(0,ca)+_+aa.value.substr(da,aa.value.length),aa.scrollTop=ba},U=_=>{let aa=_.target,ba=aa.getAttribute('src');T('[image url='+ba+']')},V=()=>{let aa=document.querySelector('#forum_form_message');aa.value=''},W=()=>{setTimeout(()=>{let _=document.querySelector('.bbcode');if(_){let aa=S();_.insertAdjacentHTML('afterbegin',aa)}},1500)},X=()=>{const _=document.querySelectorAll('.forum_body'),aa=['Ir al GB','Posts recientes del usuario','Invitar amistoso'],ba=['Guestbook','Posts','Amistosos'],ca=window.location.href,da=ca[3].replace('forum_id=','');for(let ea=0;ea<_.length;ea++){let fa=_[ea].querySelector('.post-author'),ga=fa.querySelector('a'),ha=ga.href.split('&')[1].replace('uid=',''),ia=ga.innerHTML,ja=_[ea].querySelector('.forum-post-badges'),ka=ja.querySelector('img').src.split('=')[1].replace('&sport',''),la='<a class="quicklink" href="/?p=guestbook&uid='+ha+'" title="'+aa[0]+'">'+ba[0]+'</a><a class="quicklink" href="?p=forum&sub=search&search_keywords=&search_keyword_type=any&search_author='+ia+'&search_forum='+da+'&search_range=7&search_sort_by=post_date&search_sort_order=desc" title="'+aa[1]+'">'+ba[1]+'</a><a class="quicklink" href="?p=team&sub=challenge&tid='+ka+'" title="'+aa[2]+'">'+ba[2]+'</a>';fa.insertAdjacentHTML('beforeend',la)}},Y=()=>{const _=window.location.href;-1<_.indexOf('topics&forum_id')||-1<_.indexOf('topic&topic_id')||-1<_.indexOf('guestbook')?(W(),h(),X(),R()):-1<_.indexOf('p=match&sub=result')?(r(),t()):-1<_.indexOf('training')?E():-1<_.indexOf('sub=scheduled')?y():-1<_.indexOf('players&pid')?Q():-1<_.indexOf('standings&fsid')&&setTimeout(()=>{C()},1500),B()},Z=()=>{$(document).on('click','.js-delete-signature',o).on('click','.js-empty-post-textarea',V).on('click','.js-icons-container img',U).on('click','.js-preview-results',z).on('click','.js-save-signature',l).on('click','.js-signature',p).on('click','.js-render-tax',P).on('click','.training_report_header',E).on('submit','.js-calculate-tax',N).on('keydown change','.js-only-numbers',F)};return{init:()=>{c(),g(),f(),Y(),Z()}}})();window.addEventListener('load',()=>{rzscript.init()});