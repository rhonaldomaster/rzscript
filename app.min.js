// ==UserScript==
// @name           rzscript
// @namespace      rzscript
// @description    Optimized version of original MZScript
// @include        http*://*managerzone.*
// @grant          none
// @version        0.1
// @copyright      GNU/GPL v3
// @authors        rhonaldomaster (https://github.com/rhonaldomaster)
// @credits        MZScript por c_c (c_c@managerzone.com) | serbocapo (serbocapo@managerzone.com)
// ==/UserScript==
const rzscript=(()=>{const a=['','soccer','hockey'],c=()=>{const X='#pt-wrapper{bottom:52px;filter:alpha(opacity=50);opacity:0.5;}#notifications-wrapper{bottom:-2px;}.quicklink{background-color:#4A4A4A;border:0;border-radius:4px;box-shadow:0 0 1px 0 #000;color:#FFF;cursor:pointer;display:inline-block;margin-left:4px;padding:2px 4px;text-decoration:none;}.quicklink:hover{background-color:#000000;box-shadow:0 0 2px 0 #000000;color:#FFFFFF;text-decoration:none;}.pagelinks{padding:0 4px 8px;}.quicklinks{text-align:center;}#fluid-menu-opener > div.sport-line,#top-wrapper-sport-line{background:#5d5b5f none repeat scroll 0 0;}.preview-results{border:2px solid #2A4CB0;cursor:pointer;float:right;height:20px;padding:4px 0 0 4px;width:20px;}.bbcode{margin:auto;max-width:640px;}';if('undefined'!=typeof GM_addStyle)return void GM_addStyle(X);if('undefined'!=typeof PRO_addStyle)return void PRO_addStyle(X);if('undefined'!=typeof addStyle)return void addStyle(X);let Y=document.querySelectorAll('head');if(!(1>Y.length)){let Z=document.createElement('style');Z.appendChild(document.createTextNode(X)),Y[0].appendChild(Z)}},d=X=>{const Y=document.querySelector(X.selector);if(!Y){let Z='<div '+('.'==X.selector.charAt(0)?'class':'id')+'="'+X.selector.replace(/\./g,'')+'">';Z+=X.links.reduce((_,aa)=>{let ba=0>aa.url.indexOf('?p=')?' target="_blank"':'';return _+'<a class="quicklink" href="'+aa.url+'"'+ba+' title="'+aa.title+'">'+aa.text+'</a>'},''),Z+='</div>',X.wrapper.insertAdjacentHTML(X.prepend?'afterbegin':'beforeend',Z)}},f=()=>{const Y={selector:'.js-forum-buttons',wrapper:document.querySelector('#notifications-wrapper'),links:[{text:'MER',title:'Mercado(Transfers)',url:'?p=forum&sub=topics&forum_id=254&sport=soccer'},{text:'AMI',title:'Amistosos',url:'?p=forum&sub=topics&forum_id=249&sport=soccer'},{text:'MZH',title:'MZ Habla',url:'?p=forum&sub=topics&forum_id=253&sport=soccer'},{text:'PYR',title:'Preguntas y Respuestas',url:'?p=forum&sub=topics&forum_id=255&sport=soccer'},{text:'DA',title:'Discusi&oacute;n Abierta',url:'?p=forum&sub=topics&forum_id=250&sport=soccer'},{text:'FED',title:'Federaciones',url:'?p=forum&sub=topics&forum_id=251&sport=soccer'},{text:'HDC',title:'Hablemos de copas',url:'?p=forum&sub=topics&forum_id=252&sport=soccer'}],prepend:!1};d(Y)},g=()=>{const Y={selector:'.pagelinks .quicklinks',wrapper:document.querySelector('#contentDiv'),links:[{text:'Monitoreo',title:'Monitoreo',url:'?p=transfer&sub=yourplayers'},{text:'Vista Alternativa',title:'Ver Vista Alternativa',url:'?p=players&sub=alt'},{text:'Seguimiento',title:'Ir a Seguimiento',url:'?p=shortlist'},{text:'Finanzas',title:'Ver Finanzas',url:'?p=economy'},{text:'Mercado',title:'Ver Mercado',url:'?p=transfer'},{text:'Jugados',title:'Ver los Partidos Jugados',url:'?p=match&sub=played'},{text:'Pr&oacute;ximos',title:'Ver los Pr&oacute;ximos Partidos',url:'?p=match&sub=scheduled'},{text:'T&aacute;cticas',title:'Ir a T&aacute;cticas',url:'?p=tactics'},{text:'Lesiones/Sanciones',title:'Ver Lesionados/Sancionados',url:'?p=players&sub=unavailable'},{text:'Reporte entr.',title:'Ver el Reporte de Entrenamiento',url:'?p=training_report'},{text:'Entrenamiento',title:'Ir al Entrenamiento General',url:'?p=training'},{text:'Skiller',title:'Skiller MZ Player',url:'http://mzplayer.se'},{text:'Imgur',title:'Ir a Imgur',url:'https://imgur.com/'}],prepend:!0};d(Y)},h=()=>{const X=q();X&&localStorage.getItem('showAlwaysUserSignature')&&k(X,!1);let Y=document.querySelector('.bbcode');const Z='<form class="js-signature-form"><table style="width:100%;"><tr><td><span>Texto</span> <small>(Usa bbcode)</small></td></tr><tr><td><textarea name="signature" cols="84" rows="5" style="padding:5px;">'+(X?X:'')+'</textarea></td></tr><tr><td><button type="button" class="quicklink js-signature">Agregar firma</button><button type="button" class="quicklink js-save-signature">Guardar firma</button><button type="button" class="quicklink js-delete-signature">Borrar firma</button></td></tr></table></form>';Y.insertAdjacentHTML('beforeend',Z)},k=(X,Y)=>{let Z=document.querySelector('.markItUpEditor');const _=Y||''==Z.value;if(_){Z.value+='\r\n\r\n';for(let aa=0;50>=aa;aa++)Z.value+='-';Z.value+='\r\n'+X,m(Z)}},l=()=>{let X=document.querySelector('.js-signature-form');X=JSON.parse(D(X));let Y=X.signature.replace(/^(\s|\&nbsp;)*|(\s|\&nbsp;)*$/g,'');''!=Y&&0<Y.length&&null!=Y&&n(Y);let Z=window.confirm('Mostrar siempre?');return Z?void localStorage.setItem('showAlwaysUserSignature',Z):void localStorage.removeItem('showAlwaysUserSignature')},m=X=>{if(X.setSelectionRange)X.focus().setSelectionRange(0,0);else if(X.createTextRange){let Y=X.createTextRange();Y.moveStart('character',0).select()}},n=X=>{const Y=localStorage.getItem('userSignature');Y!=X&&localStorage.setItem('userSignature',X)},o=()=>{localStorage.removeItem('userSignature'),localStorage.removeItem('showAlwaysUserSignature'),alert('La firma fue eliminada')},p=X=>{X.preventDefault();let Y=document.querySelector('.js-signature-form');Y=JSON.parse(D(Y));let Z=Y.signature.replace(/^(\s|\&nbsp;)*|(\s|\&nbsp;)*$/g,'');''!=Z&&0<Z.length&&null!=Z&&k(Z,!0)},q=()=>{let X='';return localStorage.getItem('userSignature')?X=localStorage.getItem('userSignature'):localStorage.getItem('firmaMZ')&&(X=localStorage.getItem('firmaMZ')),X},r=()=>{const X=document.querySelector('#match-info-wrapper');if(X){let Y=X.querySelector('h1');const Z=Y.innerHTML;-1<['Liga','League'].indexOf(Z)&&(Y.innerHTML='<a href="?p=league&type=senior">'+Z+'</a>')}},s=(X,Y)=>{let Z=null;const _=X.getElementsByTagName('Player');for(let aa=0;aa<_.length;aa++)Y==_[aa].getAttribute('id')&&(Z=_[aa]);return Z},t=()=>{'soccer'==ajaxSport&&u()},u=()=>{let X=document.querySelectorAll('.team-table');if(X)for(let Y=0;Y<X.length;Y++)links=X[Y].querySelectorAll('a'),v(links[0].href.split('&')[1].split('=')[1],Y)},v=(X,Y)=>{let Z=document.querySelectorAll('#match-statistics .hitlist_wrapper_background table')[Y];if(Z){const _=$.ajax({url:'/xml/team_playerlist.php',type:'GET',data:{sport_id:a.indexOf(ajaxSport),team_id:X}});_.done(aa=>{const ba=aa.getElementsByTagName('TeamPlayers')[0].getAttribute('teamCurrency');let ca=0,da=0,ea=Z.rows[0],fa=Z.querySelector('tbody'),ga=Z.querySelector('tfoot'),ha=ga.rows[1];ea.innerHTML='<td>Valor</td>'+ea.innerHTML;for(let ia=0;ia<fa.rows.length;ia++)if(fa.rows[ia].querySelector('img'))fa.rows[ia].cells[0].colSpan='13';else{let ja=fa.rows[ia].querySelector('a'),ka=s(aa,ja.href.split('&')[1].split('=')[1]);if(ka){let la=H(ka.getAttribute('value'),ba);da+=1,fa.rows[ia].innerHTML='<td style="width:62px;text-align:right;padding-right:15px">'+I(la)+'</td>'+fa.rows[ia].innerHTML,12>da&&(ca+=la)}}ha.innerHTML='<td style="width:62px;text-align:right;padding-right:15px">'+I(ca)+'</td>'+ha.innerHTML,ga.rows[3].cells[0].colSpan='13'})}},w=()=>{let X=document.querySelector('#results-fixtures-header');X.insertAdjacentHTML('afterbegin','<div class="preview-results js-preview-results"><img src="https://i.imgur.com/WL38HPq.png" title="Ver resultados" alt="Ver resultados"/></div>')},x=()=>{let X=document.querySelectorAll('#fixtures-results-list > .odd');for(let Y=0;Y<X.length;Y++){let Z=X[Y].querySelector('.score-cell-wrapper > a'),_=$.trim(X[Y].querySelector('.set-default-wrapper').innerHTML);if(''===_){let aa=Z.href.split('&')[2].split('=')[1];const ba=$.ajax({url:'/xml/match_info.php',type:'GET',data:{sport_id:a.indexOf(ajaxSport),match_id:aa}});(function(ca){ba.done(da=>{if(!da.getElementsByTagName('ManagerZone_Error')[0]){let ea=ca.href.split('&')[3].split('=')[1],fa={local:1*da.getElementsByTagName('Team')[0].getAttribute('goals'),visitor:1*da.getElementsByTagName('Team')[1].getAttribute('goals')};ca.innerHTML=fa.local+' - '+fa.visitor,fa.local==fa.visitor?ca.className='yellow':ea==da.getElementsByTagName('Team')[0].getAttribute('id')?ca.className=fa.local>fa.visitor?'green':'red':ea==da.getElementsByTagName('Team')[1].getAttribute('id')&&(ca.className=fa.local>fa.visitor?'red':'green')}})})(Z)}}},z=()=>{let X=document.querySelectorAll('.nice_table thead tr.seriesHeader')[0],Y=X.cells[0];Y.innerHTML='<img class="js-view-div-country" src="http://i.imgur.com/IwaQRmF.png" title="Ver divisi&oacute;n y pa&iacute;s" style="cursor:pointer;">'},A=X=>{if(''!==X&&X){let Y=document.querySelector(X);if(Y){let Z=Y.querySelectorAll('.nice_table tbody > tr');for(let _=0;_<Z.length;_++){let aa=Z[_],ba=aa.querySelectorAll('a')[0],ca=ba.href.split('&')[1].replace('tid=','');const da=$.ajax({url:'/xml/manager_data.php',type:'GET',data:{sport_id:a.indexOf(ajaxSport),team_id:ca}});(function(ea){da.done(fa=>{let ga=a.indexOf(ajaxSport)-1,ha=fa.getElementsByTagName('Team')[ga].getAttribute('seriesName'),ia=fa.getElementsByTagName('UserData')[0].getAttribute('countryShortname'),ja=fa.getElementsByTagName('Team')[ga].getAttribute('seriesId'),ka=fa.getElementsByTagName('Team')[ga].getAttribute('teamId'),la='<img src="http://static.managerzone.com/nocache-581/img/flags/12/'+ia.toLowerCase()+'.png">&nbsp;';ea.insertAdjacentHTML('beforeend','&nbsp;- &gt; <a href="?p=league&type=senior&sid='+ja+'&tid='+ka+'">'+ha+'</a>'),ea.insertAdjacentHTML('afterbegin',la)})})(ba.parentNode)}}}},B=()=>{setTimeout(()=>{const X=document.querySelector('#training_report');if(X){const Y=X.childNodes[2],Z=Y.querySelector('tbody');for(let _=0;_<Z.rows.length;_++){let aa=Z.rows[_].cells[4],ba=aa.querySelectorAll('img').length;aa.querySelector('div').innerHTML+='<b>('+ba+')</b>'}}},2500)},C=X=>{-1!==$.inArray(X.keyCode,[46,8,9,27,13])||65==X.keyCode&&!0===X.ctrlKey||67==X.keyCode&&!0===X.ctrlKey||88==X.keyCode&&!0===X.ctrlKey||35<=X.keyCode&&39>=X.keyCode||(X.shiftKey||48>X.keyCode||57<X.keyCode)&&(96>X.keyCode||105<X.keyCode)&&X.preventDefault()},D=X=>{let Y={},Z=X.querySelectorAll('input, select, textarea');for(let _=0;_<Z.length;++_)Z[_].name&&(Y[Z[_].name]=Z[_].value.trim());return JSON.stringify(Y)},E=X=>{let Y=new Date(X);return Y.setMinutes(Y.getMinutes()-Y.getTimezoneOffset())},F=X=>{let Y=X.split('-');return Y[2]+'-'+Y[1]+'-'+Y[0]},G=(X,Y)=>{return(E(Y)-E(X))/86400000},H=(X,Y)=>{const Z={USD:7.4234,EUR:9.1775,SEK:1,MM:1,UYU:0.256963,R$:2.62589,GBP:13.35247,DKK:1.23522,NOK:1.07245,CHF:5.86737,CAD:5.70899,AUD:5.66999,ILS:1.6953,MXN:0.68576,ARS:2.64445,BOB:0.939,PYG:0.001309,RUB:0.26313,PLN:1.95278,ISK:0.10433,BGL:4.70738,BGN:4.70738,ZAR:1.23733,US$:7.4234,THB:0.17079,SIT:0.03896,SKK:0.24946,JPY:0.06,INR:0.17,MZ:1},_=1/Z[Y],aa=localStorage.getItem('moneda');return aa?Math.round(1/Z[cMoneda]*(X/_)):Math.round(1/Z.USD*(X/_))},I=X=>{let Y='',Z=X.toString();for(;3<Z.length;)Y='.'+Z.substr(Z.length-3)+Y,Z=Z.substring(0,Z.length-3);return Z+Y},J=X=>{const Y=G(F(X.boughtDate),F(X.soldDate));if(0>Y)return void alert('Por favor revise las fechas ingresadas');let Z={value:0,percentage:0},_=X.soldPrice-X.boughtPrice;return 0<_&&(Z.percentage=69<Y?15:26<Y?50:95,X.originalPlayer?Z.percentage=15:X.exYouth&&(Z.percentage=20>X.playerAge?25:21>X.playerAge?20:15)),Z.value=Math.round(_*(Z.percentage/100)),Z},K=X=>{X.preventDefault();let Y=X.target,Z=D(Y);Z=JSON.parse(Z);let _={originalPlayer:2==1*Z.origin,exYouth:1==1*Z.origin,playerAge:1*Z.playerAge,boughtDate:Z.boughtDate,soldDate:Z.soldDate,boughtPrice:0==1*Z.origin?1*Z.boughtValue:Z.playerValue,soldPrice:1*Z.soldValue},aa=J(_),ba='Se descuentan '+I(aa.value)+' en impuestos ('+aa.percentage+'%)<br>Recibes '+I(_.soldPrice-aa.value);document.querySelector('.js-tax-result').innerHTML=ba},L=()=>{return'<article style="padding-left:5px;"><h3>Calcular impuestos</h3><div><form class="js-calculate-tax"><table style="width:100%;"><tr><td><span>Origen jugador</span></td><td><select name="origin"><option value="0">Comprado</option><option value="1">Ex juvenil</option><option value="2">Original del club</option></select></td></tr><tr><td><span>Valor jugador</span> <span style="color:#A3A30D;">*</span></td><td><input type="text" name="playerValue" value="0" class="js-only-numbers"></td></tr><tr><td><span>Edad jugador</span> <span style="color:#A3A30D;">*</span></td><td><select name="playerAge"><option value="19">19</option><option value="20">20</option><option value="21">M&aacute;s de 20</option></select></td></tr><tr><td><span>Valor compra</span> <span style="color:#FF043D;">*</span></td><td><input type="text" name="boughtValue" class="js-only-numbers"></td></tr><tr><td><span>Valor venta</span></td><td><input type="text" name="soldValue" class="js-only-numbers"></td></tr><tr><td><span>Fecha compra</span> <span style="color:#FF043D;">*</span></td><td><input type="text" name="boughtDate" placeholder="dd-mm-aaaa"></td></tr><tr><td><span>Fecha venta</span></td><td><input type="text" name="soldDate" placeholder="dd-mm-aaaa"></td></tr></table><div><span style="color:#FF043D;">*</span> <span>Si el jugador fue comprado</span><br><span style="color:#A3A30D;">*</span> <span>Si el jugador es original del club o ex juvenil</span></div><div style="margin-top:4px;"><button type="submit" class="quicklink"><span class="buttonClassMiddle">Calcular</span></button></div><div><p class="js-tax-result"></p></div></form></div></article>'},M=X=>{X.preventDefault();let Y=L(),Z=document.querySelector('.dg_playerview_info');Z.insertAdjacentHTML('beforeend',Y)},N=()=>{let X=document.querySelector('.dg_playerview_info'),Y=X.querySelector('p');Y.insertAdjacentHTML('beforeend','<a href="#" class="js-render-tax mzbtn buttondiv button_red"><span class="buttonClassMiddle" style="white-space:nowrap;">Impuestos</span><span class="buttonClassRight">&nbsp;</span></a>')},O=()=>{const X=document.querySelectorAll('#topics-list > dd');for(let Y=0;Y<X.length;Y++){let Z=X[Y].querySelector('.topics-col-title').querySelector('a').getAttribute('href'),_=X[Y].querySelector('.topics-col-counter'),aa=(_.innerText||_.textContent).split(' / '),ba=parseInt(aa[1]),ca=Math.floor(parseInt(ba)/50);if(0<ca&&50<ba){let ea=5<ca?5:ca+1;for(let fa=2;fa<ea;fa++){}}}},P=()=>{return'<div><div class="mzbtn buttondiv button_account" title="Borrar texto del area de mensaje"><span class="buttonClassMiddle js-empty-post-textarea" style="white-space: nowrap">Vaciar</span><span class="buttonClassRight">&nbsp;</span></div><div class="js-icons-container"><img src="http://i.imgur.com/3YitWv3.gif" alt=">"/>&nbsp;<img src="http://i.imgur.com/Q3B4Dqz.gif" title="(y)" alt="(y)"/>&nbsp;<img src="http://i.imgur.com/vWFv3Gt.gif" title="(n)" alt="(n)"/>&nbsp;<img src="http://i.imgur.com/jaT1cb4.gif" height="20px" title="wtf" alt="wtf"/>&nbsp;<img src="http://i.imgur.com/VfbyDHO.gif" height="20px" title="fail" alt="fail"/>&nbsp;<img src="http://i.imgur.com/cheJFuk.gif" height="20px" title="repost" alt="repost"/>&nbsp;<img src="http://i.imgur.com/jDjyKTf.gif" title="cri" alt="cri"/>&nbsp;<img src="http://i.imgur.com/6PopX5q.gif" title="ha-ha" alt="ha-ha"/><img src="http://i.imgur.com/nRp5BpE.gif" title=":)" alt=":)"/>&nbsp;<img src="http://i.imgur.com/CcuKTNz.gif" title=":D" alt=":D"/>&nbsp;<img src="http://i.imgur.com/Dfl5ZGS.gif" title="D" alt="D"/>&nbsp;<img src="http://i.imgur.com/8t9ZJse.gif" title="xD" alt="xD"/>&nbsp;<img src="http://i.imgur.com/1kJhHCs.gif" title=":/" alt=":/"/>&nbsp;<img src="http://i.imgur.com/1ncAraF.gif" title=":(" alt=":("/>&nbsp;<img src="http://i.imgur.com/xp6xUJJ.gif" title=":*(" alt=":*("/>&nbsp;<img src="http://i.imgur.com/qOigaWi.png" title=":S" alt=":S"/>&nbsp;<img src="http://i.imgur.com/nITjZn5.gif" title="erm" alt="erm"/>&nbsp;<img src="http://i.imgur.com/rSqmTPO.gif" title="8-)" alt="8-)"/>&nbsp;<img src="http://i.imgur.com/qP1rAQ5.png" title="\xAC\xAC" alt="\xAC\xAC"/>&nbsp;<img src="http://i.imgur.com/HdNdWN0.png" title="porfi" alt="porfi"/>&nbsp;<img src="http://i.imgur.com/QuXS7fE.gif" title="O.O" alt="O.O"/>&nbsp;<img src="http://i.imgur.com/RUQN2Hy.gif" title="_hm" alt="_hm"/>&nbsp;<img src="http://i.imgur.com/QLCdFIE.gif" title=">:(" alt=">:("/>&nbsp;<img src="http://i.imgur.com/55sAO1r.gif" title=">:)" alt=">:)"/>&nbsp;<img src="http://i.imgur.com/KbQOSgw.gif" title="flirt" alt="flirt"/>&nbsp;<img src="http://i.imgur.com/t5dALqK.gif" title=":P" alt=":P"/>&nbsp;<img src="http://i.imgur.com/zpY2A6I.gif" title="|-(" alt="|-("/>&nbsp;<img src="http://i.imgur.com/yPtUjin.gif" title=";)" alt=";)"/>&nbsp;<img src="http://i.imgur.com/OOsLDaW.gif" title="(h)" alt="(h)"/>&nbsp;<img src="http://i.imgur.com/LdCQyai.png" title="u.u" alt="u.u"/>&nbsp;<img src="http://i.imgur.com/KnhAURP.gif" title="shh" alt="shh"/>&nbsp;<img src="http://i.imgur.com/BzPDfzF.gif" title="nana" alt="nana"/><img src="http://i.imgur.com/XEHiXuO.gif" height="23px" title="rock" alt="rock"/><img src="http://i.imgur.com/CsCrOnE.gif" title="grr" alt="grr"/>&nbsp;<img src="http://i.imgur.com/K2d1Mbv.gif" height="23px" title="jaja" alt="jaja"/><img src="http://i.imgur.com/SMcjsnf.gif" title="eah" alt="eah"/><img src="http://i.imgur.com/aaPvRo4.gif" title="clap" alt="clap"/><img src="http://i.imgur.com/av8bxvU.gif" title="bla" alt="bla"/><img src="http://i.imgur.com/oQYWBTO.gif" title="l" alt="l"/>&nbsp;<img src="http://i.imgur.com/z64hDgz.gif" title="grr" alt="grr"/>&nbsp;<img src="http://i.imgur.com/NA84WqF.gif" title="angel" alt="angel"/>&nbsp;<img src="http://i.imgur.com/N2cdFNy.gif" title="diablo" alt="diablo"/>&nbsp;<img src="http://i.imgur.com/YWe8hno.gif" title="baba" alt="baba"/><img src="http://i.imgur.com/1t7YpCo.gif" height="23px" title="x)" alt="x)"/>&nbsp;<img src="http://i.imgur.com/UR5t0o6.gif" title="plz" alt="plz"/>&nbsp;<img src="http://i.imgur.com/KKx3thu.gif" title="umm" alt="umm"/><img src="http://i.imgur.com/sC8Mgmi.gif" title="facepalm" alt="facepalm"/>&nbsp;<img src="http://i.imgur.com/gJw92DZ.gif title="zzz" alt="zzz"/><img src="http://i.imgur.com/RzjaSKr.gif" title="om" alt="om"/><img src="http://i.imgur.com/7iCxtYD.gif" title="uh" alt="uh"/></div></div>'},Q=X=>{let Y=document.querySelector('.markItUpEditor'),Z=Y.scrollTop,_=Y.selectionStart,aa=Y.selectionEnd;Y.value=Y.value.substr(0,_)+X+Y.value.substr(aa,Y.value.length),Y.scrollTop=Z},R=X=>{let Y=X.target,Z=Y.getAttribute('src');Q('[image url='+Z+']')},S=()=>{let Y=document.querySelector('#forum_form_message');Y.value=''},T=()=>{setTimeout(()=>{let X=document.querySelector('.bbcode');if(X){let Y=P();X.insertAdjacentHTML('afterbegin',Y)}},1500)},U=()=>{const X=document.querySelectorAll('.forum_body'),Y=['Ir al GB','Posts recientes del usuario','Invitar amistoso'],Z=['Guestbook','Posts','Amistosos'],_=window.location.href,aa=_[3].replace('forum_id=','');for(let ba=0;ba<X.length;ba++){let ca=X[ba].querySelector('.post-author'),da=ca.querySelector('a'),ea=da.href.split('&')[1].replace('uid=',''),fa=da.innerHTML,ga=X[ba].querySelector('.forum-post-badges'),ha=ga.querySelector('img').src.split('=')[1].replace('&sport',''),ia='<a class="quicklink" href="/?p=guestbook&uid='+ea+'" title="'+Y[0]+'">'+Z[0]+'</a><a class="quicklink" href="?p=forum&sub=search&search_keywords=&search_keyword_type=any&search_author='+fa+'&search_forum='+aa+'&search_range=7&search_sort_by=post_date&search_sort_order=desc" title="'+Y[1]+'">'+Z[1]+'</a><a class="quicklink" href="?p=team&sub=challenge&tid='+ha+'" title="'+Y[2]+'">'+Z[2]+'</a>';ca.insertAdjacentHTML('beforeend',ia)}},V=()=>{const X=window.location.href;-1<X.indexOf('topics&forum_id')||-1<X.indexOf('topic&topic_id')||-1<X.indexOf('guestbook')?(T(),h(),U(),O()):-1<X.indexOf('p=match&sub=result')?(r(),t()):-1<X.indexOf('training')?B():-1<X.indexOf('sub=scheduled')?w():-1<X.indexOf('players&pid')&&N()},W=()=>{$(document).on('click','.js-delete-signature',o).on('click','.js-empty-post-textarea',S).on('click','.js-icons-container img',R).on('click','.js-preview-results',x).on('click','.js-save-signature',l).on('click','.js-signature',p).on('click','.js-render-tax',M).on('click','.training_report_header',B).on('submit','.js-calculate-tax',K).on('keydown change','.js-only-numbers',C)};return{init:()=>{c(),g(),f(),V(),W()}}})();window.addEventListener('load',()=>{rzscript.init()});